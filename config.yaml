sources:
  odds_api:
    enabled: false
    category: sportsbook
    request_delay_seconds: 0.5
    poll_interval_seconds: 120
  polymarket:
    enabled: true
    category: open_market
    request_delay_seconds: 0.2
    poll_interval_seconds: 30
  kalshi:
    enabled: true
    category: open_market
    request_delay_seconds: 0.3
    poll_interval_seconds: 60
  stx:
    enabled: true
    category: open_market
    request_delay_seconds: 0.2
    poll_interval_seconds: 60

sports:
  - basketball_nba
  - americanfootball_nfl

markets:
  - h2h
  - spreads
  - totals

regions:
  - us

books:
  - draftkings
  - fanduel
  - betmgm
  - betrivers
  - betonlineag

storage:
  database: odds.db

bettable_window_days: 14

arbitrage:
  min_edge_percent: 0.5
  max_data_age_seconds: 600
  reference_bankroll: 100
  fees:
    draftkings: 0.0
    fanduel: 0.0
    betmgm: 0.0
    betrivers: 0.0
    betonlineag: 0.0
    polymarket: 0.02
    kalshi: 0.01
    stx: 0.02
    default: 0.0

player_props:
  enabled: false
  max_games_per_run: 10
  markets:
    - player_points
    - player_rebounds
    - player_assists
    - player_threes

# =============================================================================
# INSIGHTS GENERATOR CONFIGURATION
# =============================================================================
# Data analysis and pattern detection module.
# All features run on-demand via CLI - no automation/daemon mode.
#
# Usage:
#   python -m insights_generator.cli scrape       # Fetch news headlines
#   python -m insights_generator.cli analyze      # Process with Ollama NLP
#   python -m insights_generator.cli detect-lag   # Find lead/lag signals
#   python -m insights_generator.cli train        # Train ML model
#   python -m insights_generator.cli predict      # Run predictions
#   python -m insights_generator.cli status       # Show summary

insights_generator:
  enabled: true
  
  # Database (uses same database as main system, adds its own tables)
  database: odds.db
  
  # News scraping (run: cli.py scrape)
  news:
    sources:
      - name: espn_nba
        url: "https://www.espn.com/espn/rss/nba/news"
        type: rss
      - name: espn_nfl
        url: "https://www.espn.com/espn/rss/nfl/news"
        type: rss
      - name: espn_nhl
        url: "https://www.espn.com/espn/rss/nhl/news"
        type: rss
      - name: espn_mlb
        url: "https://www.espn.com/espn/rss/mlb/news"
        type: rss
      - name: reddit_sportsbook
        type: api
        api_type: reddit
        subreddit: sportsbook
        limit: 100
      - name: reddit_sportsbookanalysis
        type: api
        api_type: reddit
        subreddit: SportsbookAnalysis
        limit: 100
      - name: weather_nfl
        type: api
        api_type: weather
        league: americanfootball_nfl
        hours_ahead: 72
      - name: weather_mlb
        type: api
        api_type: weather
        league: baseball_mlb
        hours_ahead: 72
      - name: espn_nba_injuries
        type: api
        api_type: espn_injuries
        sport: basketball
        league: nba
      - name: espn_nfl_injuries
        type: api
        api_type: espn_injuries
        sport: football
        league: nfl
      - name: espn_nhl_injuries
        type: api
        api_type: espn_injuries
        sport: hockey
        league: nhl
      - name: espn_mlb_injuries
        type: api
        api_type: espn_injuries
        sport: baseball
        league: mlb
      - name: espn_nba_lineups
        type: api
        api_type: espn_lineups
        sport: basketball
        league: nba
      - name: espn_nfl_lineups
        type: api
        api_type: espn_lineups
        sport: football
        league: nfl
      - name: espn_nhl_lineups
        type: api
        api_type: espn_lineups
        sport: hockey
        league: nhl
      - name: espn_mlb_lineups
        type: api
        api_type: espn_lineups
        sport: baseball
        league: mlb
  
  # Ollama NLP settings (run: cli.py analyze)
  nlp:
    ollama_model: "llama3.2"
    ollama_host: "http://localhost:11434"
    batch_size: 10
  
  # Lead/lag detection (run: cli.py detect-lag)
  lag_detection:
    lookback_minutes: 30
    min_probability_delta: 0.02
    min_lag_seconds: 5
    max_lag_seconds: 300

  # Event -> market impact analysis (run: cli.py event-impacts)
  event_impact:
    pre_window_minutes: 30
    post_window_minutes: 120
    max_event_age_hours: 72
    min_snapshot_count: 1

  # API helpers
  api:
    user_agent: "insights-generator/0.1"
    request_timeout_seconds: 15
  espn:
    cache_hours: 24
  
  # AI scoring system (run: cli.py score)
  scoring:
    weights:
      injury: 0.25
      weather: 0.10
      news_momentum: 0.15
      market_momentum: 0.20
      provider_lag: 0.20
      lineup: 0.10
    lookback_hours: 72
    max_severity: 5
    outdoor_leagues:
      - americanfootball_nfl
      - baseball_mlb

  # ML pipeline (run: cli.py train / predict)
  ml:
    min_training_samples: 1000
    model_path: "insights_generator/trained_model.pkl"
    features:
      - price_velocity
      - volatility
      - provider_spread
      - time_to_game
      - injury_severity
      - news_count
